<mat-card>
  <mat-card-header>
    <mat-card-title>
      <div class="flex flex-row justify-between">
        <b class="basis-3/4">{{ project.name }}</b>
        <app-project-icons
          class="basis-1/4 flex-initial"
          [context]="project.context"
          [status]="project.status"
          [specialization]="specialization"
        ></app-project-icons>
      </div>
    </mat-card-title>

    <!-- TODO: Resolve somehow the supervisors -->
    <!--<mat-card-subtitle *ngIf="isCompanyProject">
      <span class="companyName" matTooltip="Unternehmen">
        <b [innerHTML]="projectCompany"></b>
      </span>
    </mat-card-subtitle>

    <mat-card-subtitle>
      <span class="supervisorName" matTooltip="Projektbetreuer">
        <b [innerHTML]="getProjectSupervisors()"></b>
      </span>
    </mat-card-subtitle>-->
    <mat-card-subtitle>
      <span class="supervisorName" matTooltip="Projektbetreuer">
        <b [innerHTML]="project.supervisorName"></b>
      </span>
    </mat-card-subtitle>
  </mat-card-header>

  <mat-divider></mat-divider>

  <mat-card-content>
    <div fxLayout="column" fxLayoutAlign="space-between " fxLayoutGap="5">
      <div>
        <mat-card-subtitle>Kurze Projektbeschreibung:</mat-card-subtitle>
        <p [innerHTML]="project.shortDescription | linky"></p>
      </div>
      <div *ngIf="showDetails">
        <mat-card-subtitle> Projektbeschreibung:</mat-card-subtitle>
        <div>
          <p [innerHTML]="project.description | linky"></p>
        </div>
      </div>
      <div fxLayout.gt-md="row" fxLayoutGap.gt-md="5" fxLayoutAlign.gt-md="space-between center">
        <div fxFlex.gt-md="75">
          <mat-card-subtitle>Teilnahmevoraussetzungen:</mat-card-subtitle>

          <p *ngIf="!project.requirement">Keine Teilnahmevoraussetzungen</p>

          <p>{{ project.requirement }}</p>
        </div>
        <div fxFlex.gt-md="25">
          <mat-card-subtitle>Projekttypen:</mat-card-subtitle>

          <p *ngFor="let module of modules">
            <b>({{ module.key }})</b> {{ module.name }}
          </p>
        </div>
      </div>
      <div fxLayout.gt-md="row" fxLayoutGap.gt-md="5" fxLayoutAlign.gt-md="space-between center">
        <div fxFlex.gt-md="75">
          <mat-chip-list *ngIf="tags">
            <mat-chip selected *ngFor="let tag of tags" matTooltip="{{ tag.tagName }}">
              {{ tag.tagName }}
            </mat-chip>
          </mat-chip-list>
        </div>
        <div fxFlex.gt-md="25">
          <mat-card-subtitle>Erstellt am:</mat-card-subtitle>
          <p>{{ project.createdAt | date: 'YYYY-MM-dd' }}</p>
        </div>
      </div>
    </div>
  </mat-card-content>

  <div *ngIf="!showDetails || hasPermission">
    <mat-divider></mat-divider>

    <mat-card-actions>
      <button
        *ngIf="!showDetails"
        mat-raised-button
        color="primary"
        class="project-button"
        routerLink="/projects/{{ project.id }}"
        matTooltip="WeiterfÃ¼hrende Projektdetails"
      >
        Projektdetails
      </button>

      <button (click)="onDeleteClick()" *ngIf="hasPermission" class="no-hover" id="project-remove-button" mat-icon-button color="warn">
        <mat-icon>delete_forever</mat-icon>
      </button>

      <button (click)="onEditClick()" *ngIf="hasPermission" class="no-hover" id="project-edit-button" mat-icon-button>
        <mat-icon>edit</mat-icon>
      </button>
    </mat-card-actions>
  </div>
</mat-card>
